function storageInfo(){$("#divStorageInfo").empty();$("#usedli").empty();$("#allocatedli").empty();$("#availableli").empty();$("#percentUsedli").empty();$("#storageProgressli").empty();$("#allocatedNav").empty();$("#usedNav").empty();$("#availableNav").empty();$("#usedPercentNav").empty();$.ajax({url:"/Document/GetStorageInfo",type:"GET",success:function(n){n==="Error"?$("#divStorageInfo").append("Error"):($("#divStorageInfo").append(n.used+" of "+n.allocated+" used "),$("#usedli, #usedNav").append(n.used),$("#allocatedli, #allocatedNav").append(n.allocated),$("#availableli, #availableNav").append(n.available),$("#percentUsedli, #usedPercentNav").append(n.percentUsed.toFixed(0)+"%"),$("#storageProgressli, #storageProgressBar").css("width",n.percentUsed+"%"),n.percentUsed>70&&($("#storageProgressBar, #storageProgressli").removeClass("progress-bar-success"),$("#storageProgressBar, #storageProgressli").addClass("progress-bar-danger")))}})}function favouriteList(){$.ajax({url:"/Document/GetFavouriteList",type:"GET",success:function(n){$("#ulFavouriteList").empty();n!==null?$(n).each(function(n,t){$("#ulFavouriteList").append('<li><a href="javascript:;"><span class="task">'+(t.type===1?'<img src="../images/icon/cabinet.png" width="15" height="15" />  ':'<span class="k-icon k-i-folder color-folder"><\/span>  ')+t.name+"<\/span><\/a><\/li>")}):$("#ulFavouriteList").append('<li><a href="javascript:;"><span class="task">Empty<\/span><\/a><\/li>')}})}function onWindowClose(){document.documentElement.style.overflow="auto";document.body.scroll="yes"}function resetNavMenu(){$("ul.page-sidebar-menu li").removeClass("active");$("ul.page-sidebar-menu li").removeClass("open");$("ul.page-sidebar-menu li a .arrow").removeClass("open");$("ul.sub-menu li").removeClass("active");$("ul.sub-menu li").removeClass("open");$("ul.sub-menu li .arrow").removeClass("open");$("ul.page-sidebar-menu").find("ul").toggle(!1,"slow")}function onAjaxLoad(n,t){resetNavMenu();document.title=n;$.ajaxSetup({cache:!1});$(".portal-render").empty();$.ajax({url:t,success:function(n){$(".portal-render").html(n);history.pushState&&history.pushState({html:n,pageTitle:document.title},"",t)}})}var notification,pushNotification;(function(){function n(n){var t,i;$(".portal-search-result").show();t="";t=n.dataItem.value;i={text:t.toString()};$("#divSearchResult").empty();$("#divSearchResult").append('<div class="loading_partial"><\/div>');$("#divSearchResult").load("/Document/SearchResultInfo",i)}function t(){this.value()===""&&($(".portal-search-result").hide(),$("#divSearchResult").empty())}jQuery(document).ready(function(){storageInfo();favouriteList();Metronic.init();Layout.init();QuickSidebar.init();$("#ul_lft_bar").slimScroll({height:"calc(100vh - 50px)",color:"#bbbbbb"});document.title==="Home"&&history.pushState&&history.pushState({html:$(".portal-render").html(),pageTitle:document.title},"");notification=$("#notification").kendoNotification({width:"24em",position:{pinned:!0,top:60,right:15},autoHideAfter:2e3,templates:[{type:"error",template:$("#errorTemplate").html()},{type:"success",template:$("#successTemplate").html()}]}).data("kendoNotification")});pushNotification=$("#pushNotification").kendoNotification({width:"24em",position:{pinned:!0,bottom:60,left:15},autoHideAfter:3e3,animation:{open:{effects:"slideIn:right"},close:{effects:"slideIn:right",reverse:!0}},templates:[{type:"error",template:$("#pushErrorTemplate").html()},{type:"success",template:$("#pushSuccessTemplate").html()}]}).data("kendoNotification");$("body").click(function(n){(n.target.className!=="box"||n.target.className!=="nav-cmenu")&&$(".nav-cmenu").hide()});$("body").click(function(n){(n.target.className!=="box"||n.target.className!=="cmenu")&&$(".cmenu").hide()});$("#cabinetAutoComplete").kendoAutoComplete({filter:"contains",placeholder:"Search folder, file and docs",dataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:"/Document/GetSearchResult",serverPaging:!0,pageSize:20,contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",data:function(){let t=$("#cabinetAutoComplete").data("kendoAutoComplete"),n=t.value();return n==="Search folder, file and docs"&&(n=""),{text:n}}}}}),dataValueField:"value",dataTextField:"text",select:n,change:t});$("#divSearchResult").on("click",".btnView",function(){var n=parseInt($(this).data("type")),t=$(this).data("id");$(this).data("isfile")==="True"?n===1?onAjaxLoad("Cabinet Details","/Document/CabinetTileDetails?q="+t):n===2?onAjaxLoad("F1 Details","/Document/F1TileDetails?q="+t):n===3?onAjaxLoad("F2 Details","/Document/F2TileDetails?q="+t):n===4&&onAjaxLoad("F3 Details","/Document/F3TileDetails?q="+t):n===1?onAjaxLoad("Cabinet","/Document/CabinetTile"):n===2?onAjaxLoad("Cabinet Details","/Document/CabinetTileDetails?q="+t):n===3?onAjaxLoad("F1 Details","/Document/F1TileDetails?q="+t):n===4&&onAjaxLoad("F2 Details","/Document/F2TileDetails?q="+t);$(".portal-search-result").hide();$("#cabinetAutoComplete").data("kendoAutoComplete").value("")});$("#ul_lft_bar").on("click","a",function(n){if(n.preventDefault(),url=$(this).attr("href"),url!==undefined&&url!=="javascript:;"){var t=$(this).data("title");$(".portal-search-result").is(":visible")&&($(".portal-search-result").hide(),$("#cabinetAutoComplete").data("kendoAutoComplete").value(""));onAjaxLoad(t,url)}});window.onpopstate=function(n){n.state&&($("ul.page-sidebar-menu li").removeClass("active"),$(".portal-render").html(n.state.html),document.title=n.state.pageTitle)};$("#storageDetails, #btnViewStorageDetails").click(function(){$("#div_lft_bar").append('<div id="divStorageDetails"><\/div>');$("#divStorageDetails").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"50%",title:"Storage",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divStorageDetails").data("kendoWindow");n.refresh("/Document/StorageInfo");n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"})})();$(document).on("click",".k-overlay",function(){$("#divPropertiesWin").length>0&&$("#divPropertiesWin").data("kendoWindow").close();$("#divHistoryWin").length>0&&$("#divHistoryWin").data("kendoWindow").close();$("#divStorageDetails").length>0&&$("#divStorageDetails").data("kendoWindow").close()});