(function(){var t="",n=0,i=0,r=0,u,f=0;$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip();$("#divRecycleList").load("/Document/RecycleList")});$("#divRecycleList").on("mousedown",".box",function(f){f.which===3&&(n=parseInt($(this).data("doctype")),$(".cmenu-options").empty(),n===1?(t=$(this).data("id"),i=parseInt($(this).data("ftype")),$(".cmenu-options").append('<li class="cmenu-option btnRestoreFolder" data-resid="'+$(this).data("resid")+'" data-doctype="1"><button class="btn btn-warning waves-effect btn-sm "  data-toggle="tooltip" title = "Restore" > <i class="fa fa-window-restore"><\/i><\/button> <span>Restore<\/span><\/li> <li class="cmenu-option btnDelete" data-resid="'+$(this).data("resid")+'" data-doctype="1"><button type="button" class="btn btn-danger waves-effect btn-sm "  data-toggle="tooltip" title="Delete"><i class="fa fa-trash"><\/i><\/button> <span>Delete<\/span><\/li><li class="cmenu-option btnPropertiesFolder" data-id="'+t+'" data-ftype="'+i+'"><button type="button" class="btn btn-info waves-effect btn-sm "  data-toggle="tooltip" title="Info">&nbsp;<i class="fa fa-info"><\/i>&nbsp;<\/button> <span>Properties<\/span><\/li>')):(r=parseInt($(this).data("id")),$(".cmenu-options").append('<li class="cmenu-option btnRestoreFile" data-resid="'+$(this).data("resid")+'" data-doctype="2"><button class="btn btn-warning waves-effect btn-sm" data-toggle="tooltip" title="Restore"><i class="fa fa-window-restore"><\/i><\/button> <span>Restore<\/span><\/li><li class="cmenu-option btnDelete" data-resid="'+$(this).data("resid")+'" data-doctype="2"><button type="button" class="btn btn-danger waves-effect btn-sm "  data-toggle="tooltip" title="Delete"><i class="fa fa-trash"><\/i><\/button> <span>Delete<\/span><\/li><li class="cmenu-option btnPropertiesFile" data-id="'+r+'"><button type="button" class="btn btn-info waves-effect btn-sm "  data-toggle="tooltip" title="Info">&nbsp;<i class="fa fa-info"><\/i>&nbsp;<\/button> <span>Properties<\/span><\/li>')),u=$("#div_lft_bar").is(":hidden")||$("#div_lft_bar").hasClass("in")?{left:f.clientX+5,top:f.clientY}:{left:f.clientX+5,top:f.clientY-45},$(".cmenu").css({top:u.top+"px",left:u.left+"px"}),$(".cmenu").show())});$(".cmenu").on("click",".btnPropertiesFolder",function(){t=$(this).data("id");i=parseInt($(this).data("ftype"));$("#divRecycleList").append('<div id="divPropertiesWin"><\/div>');$("#divPropertiesWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"35%",height:"40%",title:"Properties",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divPropertiesWin").data("kendoWindow");n.refresh("/Document/Properties?folderId="+t+"&type="+i+"&isRecycleBin=true");n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnPropertiesFile",function(){r=parseInt($(this).data("id"));$("#divRecycleList").append('<div id="divPropertiesWin"><\/div>');$("#divPropertiesWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"35%",height:"40%",title:"Properties",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divPropertiesWin").data("kendoWindow");n.refresh("/Document/Properties?fileId="+r);n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnRestoreFolder, .btnRestoreFile",function(){var t,i;f=parseInt($(this).data("resid"));n=parseInt($(this).data("doctype"));t=$("<div />").kendoWindow({actions:["Close"],title:"Alert",resizable:!1,width:"30%",modal:!0,close:onWindowClose,deactivate:function(){this.destroy()}});msg=n===1?"Are you sure want to restore this folder?":"Are you sure want to restore this file?";i=kendo.template($("#temp_win_Doc_restore").html());t.data("kendoWindow").content(i).center().open();t.find("#btn_doc_restore_noty_cancel").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto"}).end();t.find("#btn_doc_restore_noty_ok").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto";$.ajax({url:"/Document/DocumentRestore",type:"Post",data:{resId:f},success:function(t){t==="error"?notification.show({message:"Restore was unsuccessful."},"error"):(n===1?notification.show({message:"Folder has been successfully restored."},"success"):notification.show({message:"File has been successfully restored."},"success"),$("#divRecycleList").empty(),$("#divRecycleList").append('<div class="loading_partial"><\/div>'),$("#divRecycleList").load("/Document/RecycleList"),loadCabinetTree())},error:function(){notification.show({message:"Restore was unsuccessful."},"error")}})}).end();document.documentElement.style.overflow="hidden"});$(".cmenu").on("click",".btnDelete",function(){var t,i;f=parseInt($(this).data("resid"));n=parseInt($(this).data("doctype"));t=$("<div />").kendoWindow({actions:["Close"],title:"Alert",resizable:!1,width:"30%",modal:!0,close:onWindowClose,deactivate:function(){this.destroy()}});msg=n===1?"Are you sure want to delete this folder?":"Are you sure want to delete this file?";i=kendo.template($("#temp_win_delete_entry").html());t.data("kendoWindow").content(i).center().open();t.find("#btn_delete_Entry_noty_cancel").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto"}).end();t.find("#btn_delete_Entry_noty_ok").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto";$.ajax({url:"/Document/RecycleDelete",type:"Post",data:{resId:f},success:function(t){t==="error"?notification.show({message:"Delete was unsuccessful."},"error"):(n===1?notification.show({message:"Folder has been successfully deleted."},"success"):notification.show({message:"File has been successfully deleted."},"success"),$("#divRecycleList").empty(),$("#divRecycleList").append('<div class="loading_partial"><\/div>'),$("#divRecycleList").load("/Document/RecycleList"))},error:function(){notification.show({message:"Delete was unsuccessful."},"error")}})}).end();document.documentElement.style.overflow="hidden"})})();