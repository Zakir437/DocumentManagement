var QuickSidebar=function(){var n=function(){$(".top-menu .dropdown-quick-sidebar-toggler a, .page-quick-sidebar-toggler").click(function(){$("body").toggleClass("page-quick-sidebar-open")})},t=function(){var t=$(".page-quick-sidebar-wrapper"),n=t.find(".page-quick-sidebar-chat"),r=function(){var r=t.find(".page-quick-sidebar-chat-users"),u,i,f;u=t.height()-t.find(".nav-justified > .nav-tabs").outerHeight();Metronic.destroySlimScroll(r);r.attr("data-height",u);Metronic.initSlimScroll(r);i=n.find(".page-quick-sidebar-chat-user-messages");f=u-n.find(".page-quick-sidebar-chat-user-form").outerHeight()-n.find(".page-quick-sidebar-nav").outerHeight();Metronic.destroySlimScroll(i);i.attr("data-height",f);Metronic.initSlimScroll(i)},i;r();Metronic.addResizeHandler(r);t.find(".page-quick-sidebar-chat-users .media-list > .media").click(function(){let t=$(this).data("uname");n.addClass("page-quick-sidebar-content-item-shown");$(".page-quick-sidebar-chat-user-messages").removeClass("active-chat").addClass("display-none");$(".page-quick-sidebar-chat-user").find('[data-uname="'+t+'"]').removeClass("display-none").addClass("active-chat")});t.find(".page-quick-sidebar-chat-user .page-quick-sidebar-back-to-list").click(function(){n.removeClass("page-quick-sidebar-content-item-shown")});i=function(t){var e,o,u,s;t.preventDefault();let r={};var i=n.find(".page-quick-sidebar-chat-user-messages"),h=n.find(".page-quick-sidebar-chat-user-form .form-control"),c=$(".page-quick-sidebar-chat-user-messages.active-chat").data("name"),l=$(".page-quick-sidebar-chat-user-messages.active-chat").data("uname"),a=$(".page-quick-sidebar-chat-user-messages.active-chat").data("imgpath"),f=$.trim(h.val());if(f.length!==0){e=function(n,t,i,r,u,f){var e="";return e+='<div class="post '+n+'">',e+='<img class="avatar" alt="" src="'+t+'"/>',e+='<div class="message">',e+='<span class="arrow"><\/span>',e+='<a href="#" class="name">'+r+"<\/a>&nbsp;",e+='<span class="datetime">'+i+"<\/span>",e+='<span class="body">',e+=f,e+="<\/span>",e+="<\/div>",e+"<\/div>"};r.SendFromUserName=UserInfo.UserName;r.SendToUserName=l;r.Message=f;connection.invoke("SendMessageToUser",r).catch(function(n){return console.error(n.toString())});o=new Date;u=e("out",a,o.getHours()+":"+o.getMinutes(),UserInfo.UserFullName,"avatar3",f);u=$(u);i.append(u);s=function(){var n=0;return i.find(".post").each(function(){n=n+$(this).outerHeight()}),n};i.slimScroll({scrollTo:s()});h.val("");connection.on("GetMessageFromUser",function(){var t=new Date,n=e("in",t.getHours()+":"+t.getMinutes(),c,"avatar2","Lorem ipsum doloriam nibh...");n=$(n);i.append(n);i.slimScroll({scrollTo:s()})})}};n.find(".page-quick-sidebar-chat-user-form .btn").click(i);n.find(".page-quick-sidebar-chat-user-form .form-control").keypress(function(n){if(n.which==13)return i(n),!1})},i=function(){var n=$(".page-quick-sidebar-wrapper"),i=n.find(".page-quick-sidebar-alerts"),t=function(){var t=n.find(".page-quick-sidebar-alerts-list"),i;i=n.height()-n.find(".nav-justified > .nav-tabs").outerHeight();Metronic.destroySlimScroll(t);t.attr("data-height",i);Metronic.initSlimScroll(t)};t();Metronic.addResizeHandler(t)},r=function(){var n=$(".page-quick-sidebar-wrapper"),i=n.find(".page-quick-sidebar-settings"),t=function(){var t=n.find(".page-quick-sidebar-settings-list"),i;i=n.height()-n.find(".nav-justified > .nav-tabs").outerHeight();Metronic.destroySlimScroll(t);t.attr("data-height",i);Metronic.initSlimScroll(t)};t();Metronic.addResizeHandler(t)};return{init:function(){n();t();i();r()}}}();