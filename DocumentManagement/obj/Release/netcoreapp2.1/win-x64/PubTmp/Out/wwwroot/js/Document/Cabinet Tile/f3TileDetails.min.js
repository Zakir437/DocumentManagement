(function(){var n=0,t=[],r="",i;$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip();$("#liForCabinetTree").addClass("active");$("#liForCabinetTree").addClass("active");$("#liForCabinetTree").find("ul:eq(0)").toggle(!0,"slow");$("#btnCabinetTreeMenu.arrow").addClass("open");c_CountId=$("#C_countId").val();f1_CountId=$("#F1_CountId").val();f2_CountId=$("#F2_CountId").val();f3_CountId=$("#F3_CountId").val();selectedType=4;$("#liForCabinet_"+c_CountId).addClass("active");$("#liForCabinet_"+c_CountId).find("ul:eq(0)").toggle(!0,"slow");$("#c_arrow_"+c_CountId).addClass("open");$("#liForF1_"+f1_CountId).addClass("active");$("#liForF1_"+f1_CountId).find("ul:eq(0)").toggle(!0,"slow");$("#f1_arrow_"+f1_CountId).addClass("open");$("#liForF2_"+f2_CountId).addClass("active");$("#liForF2_"+f2_CountId).find("ul:eq(0)").toggle(!0,"slow");$("#f2_arrow_"+f2_CountId).addClass("open");$("#liForF3_"+f3_CountId).addClass("active");$("#divF3DocList").load("/Document/F3DocList?f3Id="+$("#F3Id").val())});$("#divF3DocList").on("dblclick",".box",function(){$(".docCheck").length===0&&(r="/Document/FileView?q="+$(this).data("encid"),window.open(r))});$("#divF3DocList").on("mousedown",".box",function(t){t.which===3&&(n=$(this).data("id"),$(".cmenu-options").empty(),$(".cmenu-options").append('<li class="cmenu-option btnFileView" data-href="/Document/FileView?q='+$(this).data("encid")+'"><button  class="btn btn-info waves-effect btn-sm " data-toggle="tooltip" title="View"><i class="fa fa-eye"><\/i><\/button> <span>View<\/span><\/li><li class="cmenu-option btnDownload" data-href="/Document/DownloadFile?fileId='+n+'"><button class="btn btn-primary waves-effect btn-sm" data-toggle="tooltip" title="Download"><i class="fa fa-download"><\/i><\/button> <span>Download<\/span><\/li><li class="cmenu-option btnCopyFile" data-id="'+n+'"><button type="button" class="btn waves-effect bg-purple btn-sm"  data-toggle="tooltip" title="Copy"><i class="fa fa-copy"><\/i><\/button> <span>Copy<\/span><\/li><li class="cmenu-option btnMoveFile"  data-id="'+n+'"><button type="button" class="btn btn-warning waves-effect btn-sm "  data-toggle="tooltip" title="Move"><i class="fa fa-arrow-right"><\/i><\/button> <span>Move<\/span><\/li><li class="cmenu-option btnRenameFile" data-id="'+n+'"><button type="button" class="btn btn-success waves-effect btn-sm "  data-toggle="tooltip" title="Rename"><i class="fa fa-edit"><\/i><\/button> <span>Rename<\/span><\/li><li class="cmenu-option btnFavouriteFile" data-id="'+n+'"><button type="button" class="btn bg-teal waves-effect btn-sm "  data-toggle="tooltip" title="Favourite"><i class="fa fa-heart"><\/i><\/button> <span>Favourite<\/span><\/li><li class="cmenu-option btnDeleteFile" data-id="'+n+'"><button type="button" class="btn btn-danger waves-effect btn-sm "  data-toggle="tooltip" title="Delete"><i class="fa fa-trash"><\/i><\/button> <span>Delete<\/span><\/li><li class="cmenu-option btnHistoryFile" data-id="'+n+'"><button type="button" class="btn bg-orange waves-effect btn-sm"  data-toggle="tooltip" title="History"><i class="fa fa-history"><\/i><\/button> <span>History<\/span><\/li><li class="cmenu-option btnPropertiesFile" data-id="'+n+'"><button type="button" class="btn btn-info waves-effect btn-sm "  data-toggle="tooltip" title="Info">&nbsp;<i class="fa fa-info"><\/i>&nbsp;<\/button> <span>Properties<\/span><\/li>'),i=$("#div_lft_bar").is(":hidden")||$("#div_lft_bar").hasClass("in")?{left:t.clientX+5,top:t.clientY}:{left:t.clientX+5,top:t.clientY-45},$(".cmenu").css({top:i.top+"px",left:i.left+"px"}),$(".cmenu").show())});$(".cmenu").on("click",".btnFileView",function(){r=$(this).data("href");window.open(r)});$(".cmenu").on("click",".btnDownload",function(){r=$(this).data("href");window.location.href=r});$(".cmenu").on("click",".btnRenameFile",function(){n=$(this).data("id");$("#divF3DocList").append('<div id="divRenameWin"><\/div>');$("#divRenameWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"35%",height:"30%",title:"Rename",close:onWindowClose,deactivate:function(){this.destroy()}});var t=$("#divRenameWin").data("kendoWindow");t.refresh("/Document/FileRename?id="+n);t.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnDeleteFile",function(){var t,i;n=$(this).data("id");t=$("<div />").kendoWindow({actions:["Close"],title:"Alert",resizable:!1,width:"30%",modal:!0,close:onWindowClose,deactivate:function(){this.destroy()}});msg="Are you sure want to delete this file?";i=kendo.template($("#temp_win_Doc_delete_entry").html());t.data("kendoWindow").content(i).center().open();t.find("#btn_doc_delete_Entry_noty_cancel").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto"}).end();t.find("#btn_doc_delete_Entry_noty_ok").click(function(){t.data("kendoWindow").close();document.documentElement.style.overflow="auto";$.ajax({url:"/Document/DocumentDelete",type:"Post",data:{fileId:n,isPermanent:t.find("#IsPermanent").is(":checked")},success:function(n){n==="error"?notification.show({message:"Delete was unsuccessful."},"error"):(notification.show({message:"File has been successfully deleted."},"success"),$(".btnUnSelect").click(),$("#divF3DocList").empty(),$("#divF3DocList").append('<div class="loading_partial"><\/div>'),$("#divF3DocList").load("/Document/F3DocList?f3Id="+$("#F3Id").val()),loadCabinetTree())},error:function(){notification.show({message:"Delete was unsuccessful."},"error")}})}).end();document.documentElement.style.overflow="hidden"});$(".cmenu").on("click",".btnCopyFile",function(){n=$(this).data("id");$("#divF3DocList").append('<div id="divTreeview"><\/div>');$("#divTreeview").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"40%",title:"Select",close:onWindowClose,deactivate:function(){this.destroy()}});var t=$("#divTreeview").data("kendoWindow");t.refresh("/Document/CabinetTreeView?fileId="+n+"&isCopy=true&type=4");t.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnMoveFile",function(){n=$(this).data("id");$("#divF3DocList").append('<div id="divTreeview"><\/div>');$("#divTreeview").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"40%",title:"Select",close:onWindowClose,deactivate:function(){this.destroy()}});var t=$("#divTreeview").data("kendoWindow");t.refresh("/Document/CabinetTreeView?fileId="+n+"&isCopy=false&type=4&encryptedId="+$("#F3Id").val());t.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnFavouriteFile",function(){n=$(this).data("id");$.ajax({url:"/Document/FavouriteSave",type:"Post",data:{fileId:n},success:function(n){n==="error"?notification.show({message:"File favourite was unsuccessful."},"error"):n==="exist"?notification.show({message:"This file is already added."},"error"):notification.show({message:"File has been successfully add to favourite."},"success")},error:function(){notification.show({message:"File favourite was unsuccessful."},"error")}})});$(".cmenu").on("click",".btnPropertiesFile",function(){n=$(this).data("id");$("#divF3DocList").append('<div id="divPropertiesWin"><\/div>');$("#divPropertiesWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"35%",height:"40%",title:"Properties",close:onWindowClose,deactivate:function(){this.destroy()}});var t=$("#divPropertiesWin").data("kendoWindow");t.refresh("/Document/Properties?fileId="+n);t.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnHistoryFile",function(){n=$(this).data("id");$("#divF3DocList").append('<div id="divHistoryWin"><\/div>');$("#divHistoryWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"58%",height:"50%",title:"History",close:onWindowClose,deactivate:function(){this.destroy()}});var t=$("#divHistoryWin").data("kendoWindow");t.refresh("/Document/FileHistoryPartial?id="+n);t.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".body").mousedown(function(n){if(n.target.className==="min-h-1"&&n.which===3){var t=!1;$(".cmenu-options").empty();$(".docCheck").length>0&&($(".docCheck").each(function(){$(this).is(":checked")===!0&&(t=!0)}),t===!0&&$(".cmenu-options").append('<li class="cmenu-option btnCopy"><button type="button" class="btn btn-primary waves-effect btn-sm "  data-toggle="tooltip" title="Copy"><i class="fa fa-copy"><\/i><\/button> <span>Copy<\/span><\/li><li class="cmenu-option btnMove"><button type="button" class="btn btn-warning waves-effect btn-sm " data-toggle="tooltip" title="Move"><i class="fa fa-arrow-right"><\/i><\/button> <span>Move<\/span><\/li><li class="cmenu-option btnDelete"><button type="button" class="btn btn-danger waves-effect btn-sm " data-toggle="tooltip" title="Delete"><i class="fa fa-trash"><\/i><\/button> <span>Delete<\/span><\/li>'));t===!1&&$(".cmenu-options").append('<li class="cmenu-option btnFileUpload"><label class="btn btn-success waves-effect btn-sm" data-toggle="tooltip" title="Upload"><i class="fa fa-upload"><\/i><\/label> <span>Upload<\/span><\/li><li class="cmenu-option btnMoveAll"><button type="button" class="btn btn-warning waves-effect btn-sm " data-toggle="tooltip" title="Move All"><i class="fa fa-arrow-right"><\/i><\/button> <span>Move All<\/span><\/li><li class="cmenu-option btnRefresh"><button type="button" class="btn bg-teal waves-effect btn-sm" data-toggle="tooltip" title="Refresh"><i class="fa fa-refresh"><\/i><\/button> <span>Refresh<\/span><\/li><li class="cmenu-option btnProperties"><button type="button" class="btn btn-info waves-effect btn-sm"  data-toggle="tooltip" title="Info">&nbsp;<i class="fa fa-info"><\/i>&nbsp;<\/button> <span>Properties<\/span><\/li>');i=$("#div_lft_bar").is(":hidden")||$("#div_lft_bar").hasClass("in")?{left:n.clientX+5,top:n.clientY}:{left:n.clientX+5,top:n.clientY-45};$(".cmenu").css({top:i.top+"px",left:i.left+"px"});$(".cmenu").show()}});$(".cmenu").on("click",".btnFileUpload",function(){$("#files").click()});$("#files").change(function(){var i=[],r,f,n,u,t;if(r=document.getElementById("files"),r.files.length>0)for(t=0;t<=r.files.length-1;t++)f=r.files.item(t).name,n=f.substring(f.lastIndexOf(".")+1).toLowerCase(),n==="pdf"||n==="doc"||n==="docx"||n==="txt"||n==="gif"||n==="png"||n==="jpg"||n==="jpeg"||n==="ppt"||n==="pptm"||n==="pptx"||n==="xlsx"||n==="xlsm"||n==="xltx"||n==="xltm"?i.push(r.files.item(t)):alert("This ("+f+") file not supported.");else alert("Please select a file."),i=[];if(i.length>0){for(u=new FormData,u.append("pId",$("#F3Id").val()),u.append("type",4),t=0;t<i.length;t++)u.append("files["+t+"]",i[t]);$.ajax({url:"/Document/FileSave",type:"Post",data:u,contentType:!1,processData:!1,success:function(n){n==="error"?notification.show({message:"File upload was unsuccessful."},"error"):(notification.show({message:"File has been successfully uploaded."},"success"),$("#divF3DocList").empty(),$("#divF3DocList").append('<div class="loading_partial"><\/div>'),$("#divF3DocList").load("/Document/F3DocList?f3Id="+$("#F3Id").val()),storageInfo())},error:function(){notification.show({message:"File upload was unsuccessful."},"error")}})}});$(".btnSelect").click(function(){$(".docCheck").length===0&&$(".divActionBtn").each(function(){$(this).prepend('<input  type="checkbox" class="docCheck"/>')});$(this).hide();$(".btnUnSelect").show()});$(".btnUnSelect").click(function(){$(".docCheck").length>0&&$(".docCheck").each(function(){$(this).remove()});$(this).hide();$(".btnSelect").show()});$(".cmenu").on("click",".btnCopy",function(){t=[];$(".docCheck").length>0&&$(".docCheck").each(function(){$(this).is(":checked")&&t.push($(this).parent().parent().data("id"))});$("#divF3DocList").append('<div id="divTreeview"><\/div>');$("#divTreeview").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"40%",title:"Select",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divTreeview").data("kendoWindow");n.refresh("/Document/CabinetTreeView?documents="+t.toString()+"&isCopy=true&type=4&encryptedId="+$("#F3Id").val());n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnMove",function(){t=[];$(".docCheck").length>0&&$(".docCheck").each(function(){$(this).is(":checked")&&t.push($(this).parent().parent().data("id"))});$("#divF3DocList").append('<div id="divTreeview"><\/div>');$("#divTreeview").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"40%",title:"Select",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divTreeview").data("kendoWindow");n.refresh("/Document/CabinetTreeView?documents="+t.toString()+"&isCopy=false&type=4&encryptedId="+$("#F3Id").val());n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnDelete",function(){var n,i;t=[];$(".docCheck").length>0&&$(".docCheck").each(function(){$(this).is(":checked")&&t.push($(this).parent().parent().data("id"))});n=$("<div />").kendoWindow({actions:["Close"],title:"Alert",resizable:!1,width:"30%",modal:!0,close:onWindowClose,deactivate:function(){this.destroy()}});msg="Are you sure want to delete this files?";i=kendo.template($("#temp_win_Doc_delete_entry").html());n.data("kendoWindow").content(i).center().open();n.find("#btn_doc_delete_Entry_noty_cancel").click(function(){n.data("kendoWindow").close();document.documentElement.style.overflow="auto"}).end();n.find("#btn_doc_delete_Entry_noty_ok").click(function(){n.data("kendoWindow").close();document.documentElement.style.overflow="auto";$.ajax({url:"/Document/DocumentDelete",type:"Post",data:{pIds:t.toString(),isPermanent:n.find("#IsPermanent").is(":checked")},success:function(n){n==="error"?notification.show({message:"Delete was unsuccessful."},"error"):(notification.show({message:"Files has been successfully deleted."},"success"),$(".btnUnSelect").click(),$("#divF3DocList").empty(),$("#divF3DocList").append('<div class="loading_partial"><\/div>'),$("#divF3DocList").load("/Document/F3DocList?f3Id="+$("#F3Id").val()),loadCabinetTree())},error:function(){notification.show({message:"Delete was unsuccessful."},"error")}})}).end();document.documentElement.style.overflow="hidden"});$(".cmenu").on("click",".btnMoveAll",function(){if(t=[],$(".box").each(function(){t.push($(this).data("id"))}),t.length===0)notification.show({message:"There is no files to move."},"error");else{$("#divF3DocList").append('<div id="divTreeview"><\/div>');$("#divTreeview").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"30%",height:"40%",title:"Select",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divTreeview").data("kendoWindow");n.refresh("/Document/CabinetTreeView?documents="+t.toString()+"&isCopy=false&type=4&encryptedId="+$("#F3Id").val());n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"}});$(".cmenu").on("click",".btnProperties",function(){$("#divF3DocList").append('<div id="divPropertiesWin"><\/div>');$("#divPropertiesWin").empty().kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"35%",height:"40%",title:"Properties",close:onWindowClose,deactivate:function(){this.destroy()}});var n=$("#divPropertiesWin").data("kendoWindow");n.refresh("/Document/Properties?folderId="+$("#F3Id").val()+"&type=4");n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$(".cmenu").on("click",".btnRefresh",function(){$(".btnUnSelect").click();$("#divF3DocList").empty();$("#divF3DocList").append('<div class="loading_partial"><\/div>');$("#divF3DocList").load("/Document/F3DocList?f3Id="+$("#F3Id").val())})})();