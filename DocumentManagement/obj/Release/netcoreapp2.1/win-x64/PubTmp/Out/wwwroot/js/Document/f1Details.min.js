(function(){var t="",n=[],r,u=0;$(document).ready(function(){t=$("#F1Id").val();$('[data-toggle="tooltip"]').tooltip();$("#liForCabinet").addClass("active");$("#liForCabinet .arrow").addClass("open");$("#liForCabinetList").addClass("active");$("#divF2List").load("/Document/F2List?q="+t);$("#divFileList").load("/Document/FileList?f1Id="+t+"&type=2")});$("#divF2List").on("click",".btnViewDetails",function(n){n.preventDefault();var t=$(this).attr("href");onAjaxLoad("F2 Details",t)});$("#btnCreateFolder").click(function(n){n.preventDefault();var t=$(this).attr("href");onAjaxLoad("F1 Add",t)});$("#files").change(function(){if(n=[],r=document.getElementById("files"),r.files.length>0)for($("#divFileUpload").show(),$("#divSelectedFile").empty(),i=0;i<=r.files.length-1;i++){n.push(r.files.item(i));var u=r.files.item(i).name,t=u.substring(u.lastIndexOf(".")+1).toLowerCase();t==="pdf"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-file-pdf file-icon-size pdf-icon-color"><\/i> '+u+"<\/div><\/div>"):t==="doc"||t==="docx"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-file-word file-icon-size word-icon-color"><\/i> '+u+"<\/div><\/div>"):t==="txt"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-file-txt file-icon-size txt-icon-color"><\/i> '+u+"<\/div><\/div>"):t==="gif"||t==="png"||t==="jpg"||t==="jpeg"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-image file-icon-size img-icon-color"><\/i> '+u+"<\/div><\/div>"):t==="ppt"||t==="pptm"||t==="pptx"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-file-ppt file-icon-size pp-icon-color"><\/i> '+u+"<\/div><\/div>"):t==="xlsx"||t==="xlsm"||t==="xltx"||t==="xltm"?$("#divSelectedFile").append('<div class="col-md-3"><div class="file-box"><i class="k-icon k-i-file-excel file-icon-size excel-icon-color"><\/i> '+u+"<\/div><\/div>"):(alert("This ("+u+") file not supported."),n.pop(r.files.item(i)),n.length===0&&($("#divFileUpload").hide(),$("#divSelectedFile").empty()))}else alert("Please select a file."),$("#divFileUpload").hide(),$("#divSelectedFile").empty(),n=[]});$("#btnFileUploadCancel").click(function(){$("#divFileUpload").hide();$("#divSelectedFile").empty();n=[]});$("#btnFileUpload").click(function(){var i,r;if(n.length>0){for($(this).prop("disabled",!0),i=new FormData,i.append("f1Id",t),i.append("type",2),r=0;r<n.length;r++)i.append("files["+r+"]",n[r]);$.ajax({url:"/Document/FileSave",type:"Post",data:i,contentType:!1,processData:!1,success:function(n){$("#btnFileUpload").prop("disabled",!1);$("#btnFileUploadCancel").click();n==="error"?notification.show({message:"File upload was unsuccessful."},"error"):(notification.show({message:"File has been successfully upload."},"success"),$("#divFileList").empty(),$("#divFileList").append('<div class="tiny_loading"><\/div>'),$("#divFileList").load("/Document/FileList?f1Id="+t+"&type=2"))},error:function(){$("#btnFileUpload").prop("disabled",!1);$("#btnFileUploadCancel").click();notification.show({message:"File upload was unsuccessful."},"error")}})}});$("#divFileList").on("change",".replaceFile",function(i){var f,r,e;u=parseInt($(this).data("id"));n=[];i.target.files.length>0&&(f=i.target.files.item(0).name,r=f.substring(f.lastIndexOf(".")+1).toLowerCase(),r==="pdf"?n.push(i.target.files.item(0)):r==="doc"||r==="docx"||r==="txt"?n.push(i.target.files.item(0)):r==="gif"||r==="png"||r==="jpg"||r==="jpeg"?n.push(i.target.files.item(0)):r==="ppt"||r==="pptm"||r==="pptx"?n.push(i.target.files.item(0)):r==="xlsx"||r==="xlsm"||r==="xltx"||r==="xltm"?n.push(i.target.files.item(0)):alert("This ("+f+") file not supported."),n.length>0&&(e=new FormData,e.append("fileId",u),e.append("files[0]",n[0]),$.ajax({url:"/Document/FileSave",type:"Post",data:e,contentType:!1,processData:!1,success:function(n){n==="error"?notification.show({message:"File replace was unsuccessful."},"error"):(notification.show({message:"File has been successfully replace."},"success"),$("#divFileList").empty(),$("#divFileList").append('<div class="tiny_loading"><\/div>'),$("#divFileList").load("/Document/FileList?f1Id="+t+"&type=2"))},error:function(){notification.show({message:"File replace was unsuccessful."},"error")}})))});$("#divFileList").on("click",".btnViewArchive",function(){u=parseInt($(this).data("id"));$("#divFileArchiveWin").empty();$("#divFileArchiveWin").kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"45%",height:"40%",title:"File Archive List",close:onWindowClose});var n=$("#divFileArchiveWin").data("kendoWindow");n.refresh("/Document/FileArchive?id="+u);n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"});$("#divFileList").on("click",".btnFileDelete ",function(){var n,i;u=$(this).data("id");n=$("<div />").kendoWindow({actions:["Close"],title:"Alert",width:"30%",modal:!0});msg="Are you sure want to delete this file?";i=kendo.template($("#temp_win_file_delete_entry").html());n.data("kendoWindow").content(i).center().open();n.find("#btn_file_delete_Entry_noty_cancel").click(function(){n.data("kendoWindow").close();document.documentElement.style.overflow="auto"}).end();n.find("#btn_file_delete_Entry_noty_ok").click(function(){n.data("kendoWindow").close();document.documentElement.style.overflow="auto";$.ajax({url:"/Document/FileStatusChange",type:"POST",data:{fileId:u,status:2,isKeepDocument:n.find("#keepCheckBox").is(":checked")},success:function(n){n==="error"?notification.show({message:"File restore was unsuccessful."},"error"):(notification.show({message:"File has been successfully restored."},"success"),$("#divFileList").empty(),$("#divFileList").append('<div class="tiny_loading"><\/div>'),$("#divFileList").load("/Document/FileList?f1Id="+t+"&type=2"));$("#btnArchiveCancel").closest(".k-window-content").data("kendoWindow").close()}})}).end();document.documentElement.style.overflow="hidden"});$("#divF2List").on("click",".btnEditF2",function(){var t=$(this).data("id"),n;$("#divF2EditWin").empty();$("#divF2EditWin").kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"45%",height:"50%",title:"Edit",close:onWindowClose});n=$("#divF2EditWin").data("kendoWindow");n.refresh("/Document/F2Edit?id="+t);n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"})})();