(function(){var i="",r="",n=null,t=null;$(document).ready(function(){function u(r){var u,f;if(r.field==="createdDate"){u=r.container;u.empty();u.html("<div id='divDateFilter'><input title = 'start date' placeholder = 'start' name = 'start-date' validationMessage = '*' id = 'start-date' class= 'start-date' /><span class='k-widget k-invalid-msg' data-for='start-date'><\/span><input title='end date' placeholder='end' validationMessage='*' name='end-date' id='end-date' class='end-date' /><span class='k-widget k-invalid-msg' data-for='end-date'><\/span><button type='button' id='btnDateFilter' class='k-button k-primary'>Filter<\/button><button type='reset' class='k-button'>Clear<\/button><\/div>");f=$("#divDateFilter").kendoValidator({rules:{datepicker:function(n){return n.is("[data-role=datepicker]")?n.data("kendoDatePicker").value():!0}},messages:{datepicker:"Please enter valid date!"}}).data("kendoValidator");$("#btnDateFilter").click(function(){f.validate()&&(i!==""&&(i="",$("#CabinetMultiselect").data("kendoMultiSelect").value(null)),$(this).submit())});$(".start-date",u).kendoDatePicker({format:"MMM dd,yyyy",change:function(){var t=$("#end-date").data("kendoDatePicker");n=this.value();n&&(n=new Date(n),t.min(n),n=n.toISOString())}});$(".end-date",u).kendoDatePicker({format:"MMM dd,yyyy",change:function(){var n=$("#start-date").data("kendoDatePicker");t=this.value();t&&(t=new Date(t),n.max(t),t=t.toISOString())}});u.on("click","[type='reset']",function(){n=null;t=null;i="";$("#CabinetMultiselect").data("kendoMultiSelect").value(null)})}}function f(n){var i=$("#CabinetMultiselect").data("kendoMultiSelect"),t=i.input.val();(t==="Search by name..."||t===null)&&n.preventDefault()}function e(){i="";this.value()!==""&&(i=this.value());r.data("kendoGrid").dataSource.query({skip:0,take:r.data("kendoGrid").dataSource.pageSize()})}$('[data-toggle="tooltip"]').tooltip();$("#liForCabinet").addClass("active");$("#liForCabinet .arrow").addClass("open");$("#liForCabinetList").addClass("active");var r=$("#divCabinetGrid").kendoGrid({dataSource:new kendo.data.DataSource({pageSize:20,serverFiltering:!0,serverPaging:!0,transport:{read:function(r){$.ajax({url:"/Document/GetCabinetList",dataType:"json",type:"POST",data:$.extend(r.data,{selectedId:i.toString(),startDate:n,endDate:t}),success:function(n){r.success(n)}})}},schema:{data:"data",total:"total"}}),toolbar:kendo.template($("#GridHeadertemplate").html()),filterMenuInit:u,filterable:!0,pageable:{refresh:!0,pageSizes:[5,10,15,20]},dataBound:function(){var n=this;this.tbody.find("tr").each(function(){var t=n.dataItem(this);t.status==="Deleted"?($(this).addClass("disabled"),$(this).find("td:eq(1)").wrapInner('<span class="status-label status-red shadow-style"><\/span>')):$(this).find("td:eq(1)").wrapInner('<span class="status-label status-green shadow-style"><\/span>')})},columns:[{field:"name",title:"Name",filterable:!1,width:200},{field:"status",title:"Status",width:175,filterable:!1},{field:"createdBy",title:"Created By",width:175,filterable:!1},{field:"createdDate",title:"Date",width:175,template:"#= kendo.toString(kendo.parseDate(createdDate), 'MMM dd,yy hh:mm:ss tt') #"},{title:"Actions",width:300,template:kendo.template($("#btnTemplate").html())}]});$(".k-grid-content table").addClass("table table-hover table-striped");$("#CabinetMultiselect").kendoMultiSelect({placeholder:"Search by name...",dataTextField:"text",dataValueField:"value",minLength:"2",dataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:"/Document/GetCabinet",type:"GET",data:function(){var r=$("#CabinetMultiselect").data("kendoMultiSelect"),i=r.input.val();return i==="Search by name..."&&(i=""),{text:i,startDate:n,endDate:t}}}}}),change:e,filtering:f})});$("#divCabinetGrid").on("click",".btnViewDetails",function(n){n.preventDefault();var t=$(this).attr("href");onAjaxLoad("Document Details",t)});$("#divCabinetGrid").on("click","#btnCreateCabinet, .btnAddFolder",function(n){n.preventDefault();var t=$(this).attr("href");onAjaxLoad("Cabinet Create",t)});$("#divCabinetGrid").on("click",".btnEdit",function(){r=$(this).data("id");$("#divEditWin").empty();$("#divEditWin").kendoWindow({actions:["Close"],draggable:!1,modal:!0,visible:!1,width:"45%",height:"50%",title:"Edit",close:onWindowClose});var n=$("#divEditWin").data("kendoWindow");n.refresh("/Document/CabinetEdit?id="+r);n.center().open();document.documentElement.style.overflow="hidden";document.body.scroll="no"})})();