(function(){var n=0,t=0,i="",r;$(document).ready(function(){i=$("#F1Id").val();$('[data-toggle="tooltip"]').tooltip();$("#liForCabinetTree").addClass("active");$("#btnCabinetTreeMenu.arrow").addClass("open");$("#liForCabinetTree").find("ul:eq(0)").toggle(!0,"slow");c_CountId=$("#C_countId").val();f1_CountId=$("#F1_CountId").val();selectedType=2;$("#liForCabinet_"+c_CountId).addClass("active");$("#c_arrow_"+c_CountId).addClass("open");$("#liForCabinet_"+c_CountId).find("ul:eq(0)").toggle(!0,"slow");$("#liForF1_"+f1_CountId).addClass("active")});r=$("#divForm").kendoValidator({}).data("kendoValidator");$("#btnAdd").click(function(){r.validate()&&(n===0&&$("#divFolder").empty(),n++,$("#divFolder").append('<div class="row form-group f2" data-count="'+n+'" id="divF2_'+n+'"><div class="col-xs-8"><input type="text" pattern="^(?!\\s*$).?[\\w\\W]{1,}" id="f2Name_'+n+'" data-count='+n+' name="f2Name_'+n+'" required data-required-msg="*" validationMessage="*" placeholder="Folder Name" class="form-control" /><span class="k-widget k-invalid-msg" data-for="f2Name_'+n+'"><\/span><\/div><div class="col-xs-4">'+(n===1?"":'<button type="button" class="btn btn-primary waves-effect margin-t-r btnCancelF2" data-count='+n+' data-toggle="tooltip" title="Cancel"><i class="fa fa-times"><\/i><\/button>')+'<button type="button" class="btn btn-primary waves-effect margin-t-r btnAddF2" data-count='+n+' data-toggle="tooltip" title="Add folder"><i class="fa fa-plus"><\/i><\/button><\/div><\/div>'))});$("#divFolder").on("click",".btnAddF2",function(){r.validate()&&(n++,t=parseInt($(this).data("count")),$("#divF2_"+t).append('<div class="col-xs-12 col-xs-offset-1 m-t-10 f3" data-id="'+t+'" data-count="'+n+'" id="divF3_'+n+'"><div class="row"><div class="col-xs-8"><input type="text" pattern="^(?!\\s*$).?[\\w\\W]{1,}" id="f3Name_'+n+'" data-count='+n+' name="f3Name_'+n+'" required data-required-msg="*" validationMessage="*" placeholder="Sub Folder name" class="form-control" /><span class="k-widget k-invalid-msg" data-for="f3Name_'+n+'"><\/span><\/div><div class="col-xs-4"><button type="button" class="btn btn-primary waves-effect margin-t-r btnCancelF3" data-count="'+n+'" data-toggle="tooltip" title="Cancel"><i class="fa fa-times"><\/i><\/button><\/div><\/div><\/div>'))});$("#divFolder").on("click",".btnCancelF2",function(){t=parseInt($(this).data("count"));$("#divF2_"+t).remove()});$("#divFolder").on("click",".btnCancelF3",function(){t=parseInt($(this).data("count"));$("#divF3_"+t).remove()});$("#btnSave").click(function(){if(n===0)return notification.show({message:"Please add folder."},"error"),!1;if(r.validate()){$(this).prop("disabled",!0);var u=0,e=[],f=[],o="",s="";$(".f2").each(function(){f=[];u=parseInt($(this).data("count"));o=$.trim($("#f2Name_"+u).val());$(".f3").each(function(){parseInt($(this).data("id"))===u&&(t=parseInt($(this).data("count")),s=$.trim($("#f3Name_"+t).val()),f.push({Name:s}))});e.push({Name:o,F3Folder:f})});$.ajax({url:"/Document/FolderSave",type:"POST",data:{F1Id:i,F2Folder:e},success:function(n){n==="success"?(notification.show({message:"Folder has been successfully Created."},"success"),onAjaxLoad("F1 Details","/Document/F1TileDetails?q="+i),loadCabinetTree()):(notification.show({message:"Folder create was unsuccessful."},"error"),$("#btnSave").prop("disabled",!1))},error:function(){notification.show({message:"Folder create was unsuccessful."},"error");$("#btnSave").prop("disabled",!1)}})}});$("#btnRefresh").click(function(){onAjaxLoad("F1 Add","/Document/F1Add?q="+i)});$("#btnCancel").click(function(){onAjaxLoad("F1 Details","/Document/F1TileDetails?q="+i)})})();